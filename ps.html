<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://drive.google.com/uc?export=view&id=196OrlA-nQUcCBw5dQ90wqdDhv9nxSr2T"
        type="image/x-icon">
    <title>Money Management and Position Sizing</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <!-- Animation CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles2.css">

    <!-- Particle.js Library -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">

    <!-- Hover.css Library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.3.1/css/hover-min.css">

    <!-- Google AdSense Script -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7746606719744521"
        crossorigin="anonymous"></script>
</head>

<body>
    <div id="particles-js"></div>
    <div id="container">
        <div class="header">
            <div class="logo-container">
                <div class="logo-circle">
                    <a href="index.html"><img class="logo"
                            src="https://drive.google.com/uc?export=view&id=1O1TCrghjtD9HIaDJLlLmKBh7941Yn4Gz"
                            alt="Logo">
                </div>
                <div class="title-slogan">
                    <div class="logo-text">
                        <a href="index.html">Stockify</a>
                    </div>
                    <a href="index.html">
                        <h4>Trade with confidence</h4>
                    </a>
                </div>
            </div>


            <!-- Add a menu toggle button for mobile -->
            <div class="menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>

            <div class="header-menu">
                <ul>
                    <li><a href="https://www.tradingview.com/chart/" id="tradingViewLink" target="_blank"
                            class="menu-item animated">TradingView</a></li>
                    <li><a href="https://niftychain.in/optionchain?symbol=NIFTY" id="niftyChainLink" target="_blank"
                            class="menu-item animated">AdvanceOptionChain</a></li>
                    <li><a href="ps.html" class="menu-item animated">Position-Sizing</a></li>
                    <li><a href="index.html" class="menu-item animated">Home</a></li>
                </ul>
            </div>
        </div>


        <!-- TradingView Widget BEGIN -->
        <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget"></div>
            <script type="text/javascript"
                src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
                    {
                        "symbols": [
                            {
                                "proName": "FX_IDC:EURUSD",
                                "title": "EUR to USD"
                            },
                            {
                                "proName": "BITSTAMP:BTCUSD",
                                "title": "Bitcoin"
                            },
                            {
                                "proName": "BITSTAMP:ETHUSD",
                                "title": "Ethereum"
                            },
                            {
                                "proName": "NSE:NIFTY",
                                "title": "Nifty 50"
                            },
                            {
                                "proName": "NSE:BANKNIFTY",
                                "title": "Bank nifty"
                            },
                            {
                                "proName": "NSE:CNXFINANCE",
                                "title": "Fin nifty"
                            }
                        ],
                            "showSymbolLogo": true,
                                "isTransparent": false,
                                    "largeChartUrl": "http://127.0.0.1:5500/tradingview.html",
                                        "displayMode": "adaptive",
                                            "colorTheme": "dark",
                                                "locale": "en"
                    }
                </script>
        </div>
        <!-- TradingView Widget END 
        <div id="particles-js"></div>-->
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="dashboard-container">
                        <div class="dashboard-content">
                            <div class="dashboard-left">
                                <h1>Position Sizing</h1>
                                <form id="position-sizing-form">
                                    <div class="form-group">
                                        <label for="accountBalance">Account Balance ($):</label>
                                        <input type="number" id="accountBalance"
                                            placeholder="Enter your account balance" value="50000" min="0"
                                            max="10000000000000" required />
                                    </div>

                                    <div class="form-group">
                                        <label for="riskPercentage">Risk Amount Per Trade:</label>
                                        <input type="number" id="riskPercentage" placeholder="Enter your risk Amount"
                                            value="500" min="0" max="100000000000" required />
                                    </div>

                                    <div class="form-group">
                                        <label for="lotsize">Lot Size:</label>
                                        <input type="number" id="lotsize" placeholder="Enter lot size" value="15"
                                            min="1" max="1000000000000" required />
                                    </div>

                                    <div class="form-group">
                                        <label for="riskReward">Risk Reward Ratio:</label>
                                        <input type="number" id="riskReward" placeholder="Enter risk reward ratio"
                                            value="3.0" min="0.01" max="100" required />
                                    </div>

                                    <div class="form-group">
                                        <label for="entryPrice">Entry Price:</label>
                                        <input type="number" id="entryPrice" placeholder="Enter entry price" value="100"
                                            min="0.5" max="1000000000000000000" required />
                                    </div>

                                    <div class="form-group">
                                        <label for="stopLoss">Stop Loss ($):</label>
                                        <input type="number" id="stopLoss" placeholder="Enter your stop loss" value="20"
                                            min="0" max="1000000000000" required />
                                    </div>

                                    <button type="button" id="calculateButton" class="btn btn-primary">Calculate
                                        Position Size</button>
                                    <button type="button" id="resetButton"
                                        class="btn btn-danger reset-button">Reset</button>
                                </form>
                            </div>
                            <div class="dashboard-right">
                                <div class="result-container">
                                    <h2>Results</h2>
                                    <div class="result">
                                        <label for="positionSize">Position Size (In Lot):</label>
                                        <input type="text" id="positionSize" disabled />
                                    </div>

                                    <div class="result">
                                        <label for="targetPrice">Target Price:</label>
                                        <input type="text" id="targetPrice" disabled />
                                    </div>

                                    <div class="result">
                                        <label for="stopLossPrice">Stop Loss Price:</label>
                                        <input type="text" id="stopLossPrice" disabled />
                                    </div>

                                    <div class="result">
                                        <label for="expectedProfit">Expected Profit:</label>
                                        <input type="text" id="expectedProfit" disabled />
                                    </div>

                                    <div class="result">
                                        <label for="expectedLoss">Expected Loss:</label>
                                        <input type="text" id="expectedLoss" disabled />
                                    </div>
                                </div>
                                <a href="index.html"><button type="button" id="redirectBtn"
                                        class="btn btn-success">Back</button></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

</body>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
    $(document).ready(function () {
        $('.menu-toggle').click(function () {
            $(this).toggleClass('active');
            $('.header-menu').toggleClass('active');
        });
    });
</script>

<script>
    // Function to handle mouse wheel event for input fields
    function handleMouseWheel(event, inputId) {
        // Prevent the default behavior of mouse wheel (e.g., page scrolling)
        event.preventDefault();

        // Get the input element by its ID
        const inputElement = document.getElementById(inputId);

        // Calculate the new value based on the wheel delta
        const delta = Math.max(-1, Math.min(1, event.deltaY || -event.detail));
        const step = inputElement.step ? parseFloat(inputElement.step) : 1;
        const newValue = parseFloat(inputElement.value) + step * delta;

        // Update the input value within its min and max range
        inputElement.value = Math.min(
            Math.max(newValue, parseFloat(inputElement.min)),
            parseFloat(inputElement.max) || Infinity
        );

        // Trigger the input event to update any associated logic
        inputElement.dispatchEvent(new Event('input'));
    }
    //document.getElementById('position-sizing-form').addEventListener('wheel', handleScrollInput);
    document.getElementById('accountBalance').addEventListener('wheel', (event) => handleMouseWheel(event, 'accountBalance'));
    document.getElementById('riskPercentage').addEventListener('wheel', (event) => handleMouseWheel(event, 'riskPercentage'));
    //  document.getElementById('riskReward').addEventListener('wheel', (event) => handleMouseWheel(event, 'riskReward'));
    document.getElementById('lotsize').addEventListener('wheel', (event) => handleMouseWheel(event, 'lotsize'));
    document.getElementById('entryPrice').addEventListener('wheel', (event) => handleMouseWheel(event, 'entryPrice'));
    document.getElementById('stopLoss').addEventListener('wheel', (event) => handleMouseWheel(event, 'stopLoss'));
</script>

<script>
    function handleRiskRewardScroll(event) {
        event.preventDefault();

        const riskRewardInput = document.getElementById('riskReward');

        const delta = Math.max(-1, Math.min(1, event.deltaY || -event.detail));
        const step = riskRewardInput.step ? parseFloat(riskRewardInput.step) : 0.01;

        // Calculate the precision based on the step value
        const precision = step.toString().split('.')[1] ? step.toString().split('.')[1].length : 0;

        // Update the input value with precision
        let newValue = parseFloat(riskRewardInput.value) + step * delta;
        newValue = parseFloat(newValue.toFixed(precision));

        riskRewardInput.value = Math.min(
            Math.max(newValue, parseFloat(riskRewardInput.min)),
            parseFloat(riskRewardInput.max) || Infinity
        );

        riskRewardInput.dispatchEvent(new Event('input'));
    }

    document.getElementById('riskReward').addEventListener('wheel', handleRiskRewardScroll);
</script>


<script>
    // Add this JavaScript to toggle the 'active' class on click
    document.querySelectorAll('.menu-item').forEach(item => {
        item.addEventListener('click', () => {
            item.classList.toggle('active');
        });
    });



    particlesJS('particles-js', {
        particles: {
            number: {
                value: 50, // Number of particles
                density: {
                    enable: true,
                    value_area: 1100 // Adjust the area for density of particles
                }
            },
            color: {
                value: '#ffffff' // Color of particles
            },
            shape: {
                type: 'star', // Shape of particles (circle, edge, triangle, polygon, star, image, etc.)
                stroke: {
                    width: 0,
                    color: '#000000'
                },
                polygon: {
                    nb_sides: 5
                }
            },
            opacity: {
                value: 0.5, // Opacity of particles
                random: false,
                anim: {
                    enable: false,
                    speed: 1,
                    opacity_min: 0.1,
                    sync: false
                }
            },
            size: {
                value: 3, // Size of particles
                random: true,
                anim: {
                    enable: false,
                    speed: 40,
                    size_min: 0.1,
                    sync: false
                }
            },
            line_linked: {
                enable: true,
                distance: 150, // Distance between connected particles
                color: '#ffffff',
                opacity: 0.4,
                width: 1
            },
            move: {
                enable: true,
                speed: 6, // Speed of particles' movement
                direction: 'none',
                random: false,
                straight: false,
                out_mode: 'out',
                bounce: false,
                attract: {
                    enable: false,
                    rotateX: 600,
                    rotateY: 1200
                }
            }
        },
        interactivity: {
            detect_on: 'canvas',
            events: {
                onhover: {
                    enable: true,
                    mode: 'repulse'
                },
                onclick: {
                    enable: true,
                    mode: 'push'
                },
                resize: true
            },
            modes: {
                grab: {
                    distance: 400,
                    line_linked: {
                        opacity: 1
                    }
                },
                bubble: {
                    distance: 400,
                    size: 40,
                    duration: 2,
                    opacity: 8,
                    speed: 3
                },
                repulse: {
                    distance: 200,
                    duration: 0.4
                },
                push: {
                    particles_nb: 4
                },
                remove: {
                    particles_nb: 2
                }
            }
        },
        retina_detect: true
    });

    document.addEventListener("DOMContentLoaded", function () {
        const accountBalanceInput = document.querySelector("#accountBalance");
        const riskPercentageInput = document.querySelector("#riskPercentage");
        const stopLossInput = document.querySelector("#stopLoss");
        const lotsizeInput = document.querySelector("#lotsize");
        const riskRewardInput = document.querySelector("#riskReward");
        const entryPriceInput = document.querySelector("#entryPrice");
        const targetPriceInput = document.querySelector("#targetPrice");
        const stopLossPriceInput = document.querySelector("#stopLossPrice");
        const expectedProfitInput = document.querySelector("#expectedProfit");
        const expectedLossInput = document.querySelector("#expectedLoss");
        const calculateButton = document.querySelector("#calculateButton");
        const positionSizeInput = document.querySelector("#positionSize");

        calculateButton.addEventListener("click", function () {
            const accountBalance = parseFloat(accountBalanceInput.value);
            const riskPercentage = parseFloat(riskPercentageInput.value);
            const stopLoss = parseFloat(stopLossInput.value);
            const lotsize = parseFloat(lotsizeInput.value);
            const riskReward = parseFloat(riskRewardInput.value);
            const entryPrice = parseFloat(entryPriceInput.value);

            if (
                !isNaN(accountBalance) &&
                !isNaN(riskPercentage) &&
                !isNaN(stopLoss) &&
                !isNaN(lotsize) &&
                !isNaN(riskReward) &&
                !isNaN(entryPrice)
            ) {
                const positionSize = riskPercentage / stopLoss / lotsize;
                positionSizeInput.value = positionSize.toFixed(0);
                positionSizeInput.classList.add("highlighted")
                const targetPrice = entryPrice + stopLoss * riskReward;
                const stopLossPrice = entryPrice - stopLoss;
                const expectedProfit =
                    positionSize.toFixed(0) * lotsize * (targetPrice - entryPrice);
                const expectedLoss =
                    positionSize.toFixed(0) * lotsize * (entryPrice - stopLossPrice);

                targetPriceInput.value = targetPrice.toFixed(2);
                stopLossPriceInput.value = stopLossPrice.toFixed(2);
                expectedProfitInput.value = expectedProfit.toFixed(2);
                expectedLossInput.value = expectedLoss.toFixed(2);
            } else {
                alert("Please enter valid numbers for all inputs.");
            }
        });

        const resetButton = document.querySelector("#resetButton");
        resetButton.addEventListener("click", function () {
            // Clear all input fields
            accountBalanceInput.value = "";
            riskPercentageInput.value = "";
            stopLossInput.value = "";
            lotsizeInput.value = "";
            riskRewardInput.value = "";
            entryPriceInput.value = "";
            targetPriceInput.value = "";
            stopLossPriceInput.value = "";
            expectedProfitInput.value = "";
            expectedLossInput.value = "";
            positionSizeInput.value = "";
            positionSizeInput.classList.remove("highlighted"); // Remove the "highlighted" class
        });
    });
</script>
</body>

</html>
